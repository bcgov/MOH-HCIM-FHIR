<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE HTML>
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>MOH-HCIM\Revise and Merge Patient - FHIR v4.0.1</title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="author" content="http://hl7.org/fhir"/>

    <link rel="stylesheet" href="fhir.css"/>

      <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="assets/css/bootstrap-fhir.css"/>

      <!-- Project extras -->
    <link rel="stylesheet" href="assets/css/project.css"/>
    <link rel="stylesheet" href="assets/css/pygments-manni.css"/>
    <link rel="stylesheet" href="assets/css/jquery-ui.css"/>
  	<link rel="stylesheet" href="assets/css/prism.css"/>
      <!-- Placeholder for child template CSS declarations -->
<link rel="stylesheet" href="assets/css/bc-fhir.css"/>


    <script src="fhir-table-scripts.js" type="text/javascript"> </script>

      <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
      <!-- [if lt IE 9]>
    <script src="assets/js/html5shiv.js"></script>
    <script src="assets/js/respond.min.js"></script>
    <![endif] -->

      <!-- Favicons -->
    <link sizes="144x144" rel="apple-touch-icon-precomposed" href="assets/ico/apple-touch-icon-144-precomposed.png"/>
    <link sizes="114x114" rel="apple-touch-icon-precomposed" href="assets/ico/apple-touch-icon-114-precomposed.png"/>
    <link sizes="72x72" rel="apple-touch-icon-precomposed" href="assets/ico/apple-touch-icon-72-precomposed.png"/>
    <link rel="apple-touch-icon-precomposed" href="assets/ico/apple-touch-icon-57-precomposed.png"/>
    <link rel="shortcut icon" href="assets/ico/favicon.png"/>
  </head>
  <body onload="document.body.style.opacity='1'">

	  <script src="assets/js/prism.js"></script>

    <style type="text/css">h2{--heading-prefix:"9"}
    h3,h4,h5,h6{--heading-prefix:"9"}</style>
    <div id="segment-header" class="segment">    <!-- segment-header -->
      <div class="container">    <!-- container -->
          <!-- Left logo - typically the publisher's logo - project or affiliate -->
        <div id="project-nav">
          <a no-external="true" id="project-logo" href="https://www2.gov.bc.ca/gov/content/governments/organizational-structure/ministries-organizations/ministries/health">
            <img src="assets/images/BCMinistry.png" alt="Project home" height="71"/>
          </a>
        </div>



        <div id="ig-status">
          <p><span style="font-size:12pt;font-weight:bold"></span><br/>0.1.0 - ci-build</p>
        </div>
      </div>   <!-- /container -->
    </div>    <!-- /segment-header -->

    <div id="segment-navbar" class="segment">    <!-- segment-navbar -->
      <div id="stripe"> </div>
      <div class="container">    <!-- container -->
          <!-- HEADER CONTENT -->

        <nav class="navbar navbar-inverse">
            <!-- status-bar -->
          <div class="container">
            <button data-target=".navbar-inverse-collapse" data-toggle="collapse" type="button" class="navbar-toggle">
              <span class="icon-bar"> </span>
              <span class="icon-bar"> </span>
              <span class="icon-bar"> </span>
            </button>
            <a href="http://hl7.org/fhir/R4/index.html" class="navbar-brand hidden">FHIR</a>
            <div class="nav-collapse collapse navbar-inverse-collapse">
                <!-- menu.xml -->

<ul class="nav navbar-nav">
  <li>
    <a href="index.html">Home</a>
  </li>
  <li>
    <a href="overview.html">Overview</a>
  </li>
  <li class="dropdown">
    <a data-toggle="dropdown" href="#" class="dropdown-toggle">Design
      <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
      <li>
        <a href="design.html">Summary</a>
      </li>
      <li>
        <a href="search.html">Search Patient</a>
      </li>
      <li>
        <a href="reviseAndMerge.html">Revise And Merge Patient</a>
      </li>
      <li>
        <a href="distributions.html">Distributions</a>
      </li>
    </ul>
  </li>
  <li>
    <a href="v3Transition.html">V3 Transition</a>
  </li>
  <li>
    <a href="connectedPartner.html">Connected Partner</a>
  </li>
  <li>
    <a href="artifacts.html">Artifacts</a>
  </li>
  <li>
    <a href="terminology.html">Glossary</a>
  </li>
  <li>
    <a href="credits.html">Credits</a>
  </li>
</ul>
            </div>    <!-- /.nav-collapse -->
          </div>    <!-- /.container -->
        </nav>    <!-- /.navbar -->
        <!-- /HEADER CONTENT -->
      </div>    <!-- /container -->
    </div>    <!-- /segment-navbar -->
      <!-- status-bar -->

    <div id="segment-breadcrumb" class="segment">    <!-- segment-breadcrumb -->
      <div class="container">    <!-- container -->
        <ul class="breadcrumb">
          <li><a href="toc.html"><b>Table of Contents</b></a></li><li><b>Revise and Merge Patient</b></li>

        </ul>
      </div>    <!-- /container -->
    </div>    <!-- /segment-breadcrumb -->

    <a name="top"> </a>
    <div id="segment-content" class="segment">    <!-- segment-content -->
      <div class="container">    <!-- container -->
        <div class="row">
          <div class="inner-wrapper">

<style type="text/css">
h2:before{color:silver;counter-increment:section;content:var(--heading-prefix) " ";}
h3:before{color:silver;counter-increment:sub-section;content:var(--heading-prefix) "." counter(sub-section) " ";}
h4:before{color:silver;counter-increment:composite;content:var(--heading-prefix) "." counter(sub-section) "." counter(composite) " ";}
h5:before{color:silver;counter-increment:detail;content:var(--heading-prefix) "." counter(sub-section) "." counter(composite) "." counter(detail) " ";}
h6:before{color:silver;counter-increment:more-detail;content:var(--heading-prefix) "." counter(sub-section) "." counter(composite) "." counter(detail) "." counter(more-detail)" ";}
</style>
<div class="col-12">
    <!-- ReleaseHeader --><p id="publish-box">BCHCIM - Local Development build (v0.1.0). See the <a href="http://moh.fhir.org/moh-hcim/history.html">Directory of published versions</a></p>  <!-- EndReleaseHeader -->
  <h2>Revise and Merge Patient</h2>
  









    <p>  <!-- white space is critical inside of capture --></p>
<div class="markdown-toc">
<ul id="markdown-toc">
  <li><a href="#revise-patient" id="markdown-toc-revise-patient">Revise Patient</a></li>
  <li><a href="#merge-patient" id="markdown-toc-merge-patient">Merge Patient</a></li>
  <li><a href="#fhir-structure-for-revise-merge-and-distributions" id="markdown-toc-fhir-structure-for-revise-merge-and-distributions">FHIR Structure for Revise, Merge and Distributions</a></li>
  <li><a href="#asynchronous-operations" id="markdown-toc-asynchronous-operations">Asynchronous Operations</a></li>
  <li><a href="#revise-patient-newborn" id="markdown-toc-revise-patient-newborn">Revise Patient Newborn</a></li>
  <li><a href="#merge-patient-1" id="markdown-toc-merge-patient-1">Merge Patient</a></li>
  <li><a href="#parameters-for-revise-and-merge" id="markdown-toc-parameters-for-revise-and-merge">Parameters for Revise and Merge</a></li>
</ul>

</div>
<blockquote>
  <p><strong>Note</strong><br/>This specification is currently published as a Draft Standard on the ministry github and is not intended for implementation. Feedback is welcome but readers should understand that there is more work to be done in testing the profiles and operations defined in this guide. For more information, please see the Future Plans page in this guide.</p>
</blockquote>

<h3 id="revise-patient">Revise Patient</h3>

<p>The Revise Patient interaction is used to add or update client information in the Client Registry.  If the demographics are updated on the POS application, a ‘Revise Patient’ message must be automatically generated to the Client Registry.</p>

<p>An add is defined as an event where at least the minimum Client Registry data elements are gathered for the first time, validated using trusted identification provided by the client and a new PHN and client record is created.</p>

<p>An update is defined as an event where at least the minimum Client Registry data elements of an existing client with a PHN are verified using trusted identification provided by the client and updated.</p>

<p>The Client Registry treats the incoming Revise Patient as a complete snapshot of the source record. If the POS application sends a blank attribute to the Client Registry, that attribute in the source’s record in the Client Registry will be terminated.</p>

<p>To prevent the termination of certain attributes in the composite view, the POS application must first query the Client Registry and resend in a Revised Person message any attributes that were returned on the query that are not maintained in the local system.</p>

<h3 id="merge-patient">Merge Patient</h3>

<p>The Merge Patient transaction is used to merge duplicate records in the Client Registry.</p>

<p>If the records are merged on the POS application, a ‘Merged Patient’ message must be automatically generated to the Client Registry.</p>

<p>If the demographics are updated at the same time as the merge, the demographic update will be processed as a second ‘Revised Patient’ interaction was requested and will update the demographics once the merge is complete.</p>

<p>The record the POS is keeping must be in the EMPI prior to the merge or the Merge Person message will fail. This record is known as the ‘survivor’ record.</p>

<h3 id="fhir-structure-for-revise-merge-and-distributions">FHIR Structure for Revise, Merge and Distributions</h3>

<p>The FHIR structure is the same for Merge, Revise and Distributions.  Responses (if required) are wrapped in collection Bundles and include OperationOutcome, Operation Parameters and Patient resources.</p>

<p><span width="100%">
<img src="revise_merge_fhir.png" alt="FHIR Structure - Revise_Merge" title="FHIR Structure for Revise and Merge"/>
</span></p>

<h3 id="asynchronous-operations">Asynchronous Operations</h3>
<p>The asynchronous pattern for Revise and Merge Patient follow the same pattern as V3.  That is</p>

<p>client -&gt; request to Client Registry -&gt; Client Registry responds with OK</p>

<p>Client Registry -&gt; late, request to client with response</p>

<p>The interactions are associated by the unique message id in the Parameters resource.  The client must create a FHIR Operation end point to receive the responses at a later time.</p>

<blockquote>
  <p>What is the response end point?  Will it be https://…./$RevisePatient.Async ?</p>
</blockquote>

<h3 id="revise-patient-newborn">Revise Patient Newborn</h3>

<p>Newborn events use the RevisePatient.Newborn operation; a parameter, ‘mothersPHN’ is included.</p>

<h3 id="merge-patient-1">Merge Patient</h3>

<p>Merge events use the MergePatient operation; a parameter, ‘relatedPerson’ is included to identify the non-survivors.</p>

<h3 id="parameters-for-revise-and-merge">Parameters for Revise and Merge</h3>

<h4 id="revise-patient-in">Revise Patient IN</h4>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Parameter Name</th>
      <th style="text-align: left">Parameter Value</th>
      <th style="text-align: left">Comments</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">patient</td>
      <td style="text-align: left">Patient resource</td>
      <td style="text-align: left">A Patient resource</td>
    </tr>
  </tbody>
</table>

<h4 id="revise-patient-newborn-in">Revise Patient Newborn IN</h4>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Parameter Name</th>
      <th style="text-align: left">Parameter Value</th>
      <th style="text-align: left">Comments</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">patient</td>
      <td style="text-align: left">Patient resource</td>
      <td style="text-align: left">A Patient resource representing newborn</td>
    </tr>
    <tr>
      <td style="text-align: left">mothersPHN</td>
      <td style="text-align: left">parameter.value[string]</td>
      <td style="text-align: left">The mothers PHN</td>
    </tr>
  </tbody>
</table>

<h4 id="merge-patient-in">Merge Patient IN</h4>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Parameter Name</th>
      <th style="text-align: left">Parameter Value</th>
      <th style="text-align: left">Comments</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">patient</td>
      <td style="text-align: left">Patient resource</td>
      <td style="text-align: left">A Patient resource that for Merge is the surviving client</td>
    </tr>
    <tr>
      <td style="text-align: left">relatedPerson</td>
      <td style="text-align: left">parameter.value[Identifier]</td>
      <td style="text-align: left"><strong>Is this Identifier or something else?</strong></td>
    </tr>
  </tbody>
</table>

<h4 id="revise-patient-out-bundle">Revise Patient OUT Bundle</h4>

<p>The Bundle type is collection.</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Bundle Entry</th>
      <th style="text-align: left">Comments</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">Patient resource</td>
      <td style="text-align: left">A Patient resource</td>
    </tr>
    <tr>
      <td style="text-align: left">OperationOutcome</td>
      <td style="text-align: left">Information about the operation; warnings and errors.</td>
    </tr>
    <tr>
      <td style="text-align: left">Parameters resource</td>
      <td style="text-align: left">Any name value pair parameters such as message creation date and unique identifiers</td>
    </tr>
  </tbody>
</table>

<h4 id="revise-patient-newborn-out-bundle">Revise Patient Newborn OUT Bundle</h4>

<p>The Bundle type is collection.</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Bundle Entry</th>
      <th style="text-align: left">Comments</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">Patient resource</td>
      <td style="text-align: left">A Patient resource, the newborn</td>
    </tr>
    <tr>
      <td style="text-align: left">OperationOutcome</td>
      <td style="text-align: left">Information about the operation; warnings and errors.</td>
    </tr>
    <tr>
      <td style="text-align: left">Parameters resource</td>
      <td style="text-align: left">Any name value pair parameters such as message creation date and unique identifiers</td>
    </tr>
  </tbody>
</table>

<h4 id="merge-patient-out-bundle">Merge Patient OUT Bundle</h4>

<p>The Bundle type is collection.</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Bundle Entry</th>
      <th style="text-align: left">Comments</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">Patient resource</td>
      <td style="text-align: left">A Patient resource, the survivor</td>
    </tr>
    <tr>
      <td style="text-align: left">OperationOutcome</td>
      <td style="text-align: left">Information about the operation; warnings and errors.</td>
    </tr>
    <tr>
      <td style="text-align: left">Parameters resource</td>
      <td style="text-align: left">Any name value pair parameters such as message creation date and unique identifiers</td>
    </tr>
  </tbody>
</table>




</div>
        </div>    <!-- /inner-wrapper -->
      </div>    <!-- /row -->
    </div>    <!-- /container -->
  </div>    <!-- /segment-content -->

  <script src="assets/js/jquery.js" type="text/javascript"> </script>       <!-- note keep space here, otherwise it will be transformed to empty tag -> fails -->
  <script src="assets/js/jquery-ui.min.js" type="text/javascript"> </script>

  <script type="text/javascript">
    $(document).ready(function(){
      if(window.location.hash != "") {
          $('a[href="' + window.location.hash + '"]').click()
      }
    });
  </script>
  <a name="bottom"> </a>
  <div igtool="footer" id="segment-footer" class="segment">    <!-- segment-footer -->
    <div class="container">    <!-- container -->

      <div class="inner-wrapper">
        <p><a name="l738">​</a>
          IG &copy; 2021+ <a style="color:var(--footer-hyperlink-text-color)" href="null"></a>.  Package moh-hcim#0.1.0 based on <a style="color: var(--footer-hyperlink-text-color)" href="http://hl7.org/fhir/R4/">FHIR 4.0.1</a>. Generated <span title="Wed, Oct 20, 2021 19:41+0000">2021-10-20</span>
          <br/>
          <span style="color: var(--footer-highlight-text-color)"></span>
                      Links: <a style="color: var(--footer-hyperlink-text-color)" href="toc.html">Table of Contents</a> |
                 <a style="color: var(--footer-hyperlink-text-color)" href="qa.html">QA Report</a>
                 
                
          
        </p>
      </div>    <!-- /inner-wrapper -->
    </div>    <!-- /container -->
  </div>    <!-- /segment-footer -->
  
  <div id="segment-post-footer" class="segment hidden">    <!-- segment-post-footer -->
    <div class="container">    <!-- container -->
    </div>    <!-- /container -->
  </div>    <!-- /segment-post-footer -->
  
    <!-- JS and analytics only. -->
    <!-- Bootstrap core JavaScript
  ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
  <script src="assets/js/bootstrap.min.js" type="text/javascript"> </script>
  <script src="assets/js/respond.min.js" type="text/javascript"> </script>
  <script src="assets/js/anchor.min.js" type="text/javascript"> </script>
  <script>anchors.options.visible = 'hover'
anchors.add()</script>
  
  <!-- feedback form - Google forms -->
  <!-- v0.1, 2021-01-09 -->



  <!-- / feedback form -->

    <!-- Analytics Below
  ================================================== -->
  </body>
</html>