<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE HTML>
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>MOH-HCIM\FHIR Design - FHIR v4.0.1</title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="author" content="http://hl7.org/fhir"/>

    <link rel="stylesheet" href="fhir.css"/>

      <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="assets/css/bootstrap-fhir.css"/>

      <!-- Project extras -->
    <link rel="stylesheet" href="assets/css/project.css"/>
    <link rel="stylesheet" href="assets/css/pygments-manni.css"/>
    <link rel="stylesheet" href="assets/css/jquery-ui.css"/>
  	<link rel="stylesheet" href="assets/css/prism.css"/>
      <!-- Placeholder for child template CSS declarations -->
<link rel="stylesheet" href="assets/css/bc-fhir.css"/>


    <script src="fhir-table-scripts.js" type="text/javascript"> </script>

      <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
      <!-- [if lt IE 9]>
    <script src="assets/js/html5shiv.js"></script>
    <script src="assets/js/respond.min.js"></script>
    <![endif] -->

      <!-- Favicons -->
    <link sizes="144x144" rel="apple-touch-icon-precomposed" href="assets/ico/apple-touch-icon-144-precomposed.png"/>
    <link sizes="114x114" rel="apple-touch-icon-precomposed" href="assets/ico/apple-touch-icon-114-precomposed.png"/>
    <link sizes="72x72" rel="apple-touch-icon-precomposed" href="assets/ico/apple-touch-icon-72-precomposed.png"/>
    <link rel="apple-touch-icon-precomposed" href="assets/ico/apple-touch-icon-57-precomposed.png"/>
    <link rel="shortcut icon" href="assets/ico/favicon.png"/>
  </head>
  <body onload="document.body.style.opacity='1'">

	  <script src="assets/js/prism.js"></script>

    <style type="text/css">h2{--heading-prefix:"4"}
    h3,h4,h5,h6{--heading-prefix:"4"}</style>
    <div id="segment-header" class="segment">    <!-- segment-header -->
      <div class="container">    <!-- container -->
          <!-- Left logo - typically the publisher's logo - project or affiliate -->
        <div id="project-nav">
          <a no-external="true" id="project-logo" href="https://www2.gov.bc.ca/gov/content/governments/organizational-structure/ministries-organizations/ministries/health">
            <img src="assets/images/BCMinistry.png" alt="Project home" height="71"/>
          </a>
        </div>



        <div id="ig-status">
          <p><span style="font-size:12pt;font-weight:bold"></span><br/>0.1.0 - ci-build</p>
        </div>
      </div>   <!-- /container -->
    </div>    <!-- /segment-header -->

    <div id="segment-navbar" class="segment">    <!-- segment-navbar -->
      <div id="stripe"> </div>
      <div class="container">    <!-- container -->
          <!-- HEADER CONTENT -->

        <nav class="navbar navbar-inverse">
            <!-- status-bar -->
          <div class="container">
            <button data-target=".navbar-inverse-collapse" data-toggle="collapse" type="button" class="navbar-toggle">
              <span class="icon-bar"> </span>
              <span class="icon-bar"> </span>
              <span class="icon-bar"> </span>
            </button>
            <a href="http://hl7.org/fhir/R4/index.html" class="navbar-brand hidden">FHIR</a>
            <div class="nav-collapse collapse navbar-inverse-collapse">
                <!-- menu.xml -->

<ul class="nav navbar-nav">
  <li>
    <a href="index.html">Home</a>
  </li>
  <li>
    <a href="overview.html">Overview</a>
  </li>
  <li class="dropdown">
    <a data-toggle="dropdown" href="#" class="dropdown-toggle">Design
      <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
      <li>
        <a href="design.html">Summary</a>
      </li>
      <li>
        <a href="search.html">Search Patient</a>
      </li>
      <li>
        <a href="reviseAndMerge.html">Revise And Merge Patient</a>
      </li>
      <li>
        <a href="distributions.html">Distributions</a>
      </li>
    </ul>
  </li>
  <li>
    <a href="v3Transition.html">V3 Transition</a>
  </li>
  <li>
    <a href="connectedPartner.html">Connected Partner</a>
  </li>
  <li>
    <a href="artifacts.html">Artifacts</a>
  </li>
  <li>
    <a href="terminology.html">Glossary</a>
  </li>
  <li>
    <a href="credits.html">Credits</a>
  </li>
</ul>
            </div>    <!-- /.nav-collapse -->
          </div>    <!-- /.container -->
        </nav>    <!-- /.navbar -->
        <!-- /HEADER CONTENT -->
      </div>    <!-- /container -->
    </div>    <!-- /segment-navbar -->
      <!-- status-bar -->

    <div id="segment-breadcrumb" class="segment">    <!-- segment-breadcrumb -->
      <div class="container">    <!-- container -->
        <ul class="breadcrumb">
          <li><a href="toc.html"><b>Table of Contents</b></a></li><li><b>FHIR Design</b></li>

        </ul>
      </div>    <!-- /container -->
    </div>    <!-- /segment-breadcrumb -->

    <a name="top"> </a>
    <div id="segment-content" class="segment">    <!-- segment-content -->
      <div class="container">    <!-- container -->
        <div class="row">
          <div class="inner-wrapper">

<style type="text/css">
h2:before{color:silver;counter-increment:section;content:var(--heading-prefix) " ";}
h3:before{color:silver;counter-increment:sub-section;content:var(--heading-prefix) "." counter(sub-section) " ";}
h4:before{color:silver;counter-increment:composite;content:var(--heading-prefix) "." counter(sub-section) "." counter(composite) " ";}
h5:before{color:silver;counter-increment:detail;content:var(--heading-prefix) "." counter(sub-section) "." counter(composite) "." counter(detail) " ";}
h6:before{color:silver;counter-increment:more-detail;content:var(--heading-prefix) "." counter(sub-section) "." counter(composite) "." counter(detail) "." counter(more-detail)" ";}
</style>
<div class="col-12">
    <!-- ReleaseHeader --><p id="publish-box">BCHCIM - Local Development build (v0.1.0). See the <a href="http://moh.fhir.org/moh-hcim/history.html">Directory of published versions</a></p>  <!-- EndReleaseHeader -->
  <h2>FHIR Design</h2>
  









    <p>  <!-- white space is critical inside of capture --></p>
<div class="markdown-toc">
<ul id="markdown-toc">
  <li><a href="#design-approach" id="markdown-toc-design-approach">Design Approach</a></li>
  <li><a href="#design-assumptions" id="markdown-toc-design-assumptions">Design Assumptions</a></li>
  <li><a href="#design-outcomes---overview" id="markdown-toc-design-outcomes---overview">Design Outcomes - Overview</a></li>
  <li><a href="#design-outcomes---details" id="markdown-toc-design-outcomes---details">Design Outcomes - Details</a></li>
  <li><a href="#get-eligibility-is-not-supported-by-fhir" id="markdown-toc-get-eligibility-is-not-supported-by-fhir">Get Eligibility is Not Supported by FHIR</a></li>
</ul>

</div>
<blockquote>
  <p><strong>Note</strong><br/>This specification is currently published as a Draft Standard on the ministry github and is not intended for implementation. Feedback is welcome but readers should understand that there is more work to be done in testing the profiles and operations defined in this guide. For more information, please see the Future Plans page in this guide.</p>
</blockquote>

<h3 id="design-approach">Design Approach</h3>
<ul>
  <li>The design team matched current Client Registry interactions 1 to 1 with equivalent FHIR interactions for all the flavours of:
    <ul>
      <li>Find Candidates</li>
      <li>Get Demographics</li>
      <li>Revise Patient</li>
      <li>Merge Patient</li>
      <li>Distribute Patient</li>
    </ul>
  </li>
  <li>Asynchronous interaction will be supported</li>
  <li>New attributes will be included in FHIR that are not in V3 (such as more business dates)</li>
</ul>

<h3 id="design-assumptions">Design Assumptions</h3>
<ul>
  <li>FHIR is not expected to adversely affect performance, i.e. SLA is not changing for FHIR but will be extended to include FHIR</li>
  <li>Existing interfaces, such as V3, will not be deprecated and users can use a combination of V3 and FHIR to meet their needs
    <blockquote>
      <p>Not sure if this is true, will users be able to use FHIR and V3 in some sort of combination?  I.e. Get Demo in FHIR than V# for Revise Patient?</p>
    </blockquote>
  </li>
  <li>The Client Registry FHIR design will become a Provincial standard</li>
  <li>Asynchronous interactions will follow the same pattern as V3</li>
  <li>Get Eligibility is not supported by FHIR (will still be supported by V3)</li>
</ul>

<h3 id="design-outcomes---overview">Design Outcomes - Overview</h3>
<ul>
  <li>The primary resource is Patient and Patient shall be used to communicate client attributes</li>
  <li>The JSON text format shall be used to receive and transmit FHIR resources</li>
  <li>FHIR Operations shall be used for Client Registry interactions
    <blockquote>
      <p>RESTful interfaces will not be implemented for FHIR</p>
    </blockquote>
  </li>
  <li>The Parameters resource used in Operations may include Patient resources as well as name value pair parameters such as search parameters or unique message identifiers and creation times</li>
  <li>Some FHIR extensions are necessary</li>
</ul>

<h4 id="patient-resource">Patient Resource</h4>

<p>All interactions will primarily use the Patient resource.  The Patient resource is ideal to represent clients as Patients has almost all of the necessary attributes and will require only a few extensions.  Patients also are recommended for enterprise master patient indices by the HL7 group and is in a Normative state, i.e. stable and ready for implementation.  See <a href="http://hl7.org/fhir/versions.html#std-process">FHIR standards evolution</a> for a description of Normative.</p>

<h5 id="patient-extensions">Patient Extensions</h5>

<p>There are several extensions that are applied to the Patient resource.  The list below is an overview, more details on the extensions can be found be following the links on the Patient snapshot page.</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Extension Name</th>
      <th style="text-align: left">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">bc-death-date-extension</td>
      <td style="text-align: left">A dateTime extension that indicates is the client’s death has been verified by …</td>
    </tr>
    <tr>
      <td style="text-align: left">bc-patient-business-dates</td>
      <td style="text-align: left">A Period extension at the Patient level that represents the entire record</td>
    </tr>
    <tr>
      <td style="text-align: left">bc-address-validation-status</td>
      <td style="text-align: left">A code that represents the address validation status.  This will be part of every Patient.address</td>
    </tr>
    <tr>
      <td style="text-align: left">bc-gender-business-dates</td>
      <td style="text-align: left">A Period extension for effective dates</td>
    </tr>
    <tr>
      <td style="text-align: left">bc-birth-date-business-dates</td>
      <td style="text-align: left">A Period extension for effective dates</td>
    </tr>
    <tr>
      <td style="text-align: left">bc-death-date-business-dates</td>
      <td style="text-align: left">A Period extension for effective dates</td>
    </tr>
    <tr>
      <td style="text-align: left">bc-death-date-flag-business-dates</td>
      <td style="text-align: left">A Period extension for effective dates</td>
    </tr>
    <tr>
      <td style="text-align: left">bc-phn-business-dates</td>
      <td style="text-align: left">A Period extension for effective dates</td>
    </tr>
  </tbody>
</table>

<h5 id="terminologies-codeableconcepts-codes-and-value-sets">Terminologies, CodeableConcepts, Codes and Value Sets</h5>

<blockquote>
  <p>Describe all the value sets being used and where we are using something different, I need help in this section</p>
</blockquote>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Attribute</th>
      <th style="text-align: left">Value Sets</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">Patient.name.use</td>
      <td style="text-align: left"><strong>Not sure how FHIR maps to Client Registry, is Legal the only code used?</strong></td>
    </tr>
    <tr>
      <td style="text-align: left">Patient.telecom.use</td>
      <td style="text-align: left">home, work, mobile are used and temp, old not allowed</td>
    </tr>
    <tr>
      <td style="text-align: left">Patient.telecom.system</td>
      <td style="text-align: left">phone or email are allowed, not the others</td>
    </tr>
    <tr>
      <td style="text-align: left">Patient.gender</td>
      <td style="text-align: left">male, female, unknown and other not allowed but <strong>Not sure</strong></td>
    </tr>
    <tr>
      <td style="text-align: left">Patient.address.type</td>
      <td style="text-align: left">postal and physical are used.  both not allowed</td>
    </tr>
    <tr>
      <td style="text-align: left">Patient.address.use</td>
      <td style="text-align: left"><strong>I think this is inferred to be always home</strong></td>
    </tr>
    <tr>
      <td style="text-align: left">Patient.identifier.system</td>
      <td style="text-align: left"><strong>Not sure</strong></td>
    </tr>
    <tr>
      <td style="text-align: left">Patient.identifier.type</td>
      <td style="text-align: left"><strong>Not sure</strong></td>
    </tr>
    <tr>
      <td style="text-align: left">Patient.identifier.use</td>
      <td style="text-align: left"><strong>Not sure</strong></td>
    </tr>
  </tbody>
</table>

<h4 id="fhir-operations">FHIR Operations</h4>

<p>Client Registry will use the FHIR Operations pattern to exchange information.  These are the Operations that Client Registry FHIR will support:</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Operations</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">https://…./$FindCandidates</td>
    </tr>
    <tr>
      <td style="text-align: left">https://…./$GetDemographics</td>
    </tr>
    <tr>
      <td style="text-align: left">https://…./$GetDemographics.History</td>
    </tr>
    <tr>
      <td style="text-align: left">https://…./$RevisePatient</td>
    </tr>
    <tr>
      <td style="text-align: left">https://…./$RevisePatient.Newborn</td>
    </tr>
    <tr>
      <td style="text-align: left">https://…./$RevisePatient.Async</td>
    </tr>
    <tr>
      <td style="text-align: left">https://…./$MergePatient</td>
    </tr>
    <tr>
      <td style="text-align: left">https://…./$MergePatient.Async</td>
    </tr>
  </tbody>
</table>

<p>Suffixes such as History and Async inform the Client Registry FHIR server to perform the operation in a particular way such as returning historical attributes or responding asynchronously.</p>

<h5 id="requests">Requests</h5>

<p>The body of the request message will vary depending on the business context however all message bodies will consist of at least one Parameter resource which in turn includes two Parameter resources.  The first Parameter.Parameter will hold operation information such as unique identifiers for the message, creation time, sender, receiver, enterer, etc  The second Parameter.Parameter resource will contain all the business information such as search parameters, resources like Patient, etc.</p>

<p>The image below shows the nested Parameters.  The Operation Parameters are for message meta data like timestamps and unique identifiers.  The Business Parameters are for search parameters or resources such as Patient.</p>

<p><span width="100%">
<img src="design_nestedParameters.png" alt="FHIR Structure - Nested Parameters" title="Nested Parameters"/>
</span></p>

<h5 id="responses">Responses</h5>

<p>Response resources are wrapped in Bundles that contain Patients and a OperationOutcome.  A search operation like Get Demographics or Find Candidates will be a searchset Bundle that echoes back the search parameters by including a Parameters resource in the Bundle.</p>

<h3 id="design-outcomes---details">Design Outcomes - Details</h3>

<p>This guide touches on some of the business and conformance rules regarding use of the Client Registry.  However this guide is not the source of conformance or business rules and the audience is referred to British Columbia’s <a href="https://www2.gov.bc.ca/gov/content/health/practitioner-professional-resources/software">Health Information Exchange</a> web site for details on the Client Registry system and access to Client Registry.</p>

<h4 id="operational-parameter-resource">Operational Parameter Resource</h4>
<p>As stated above each Parameter resource will contain two additional Parameter resources:  one for message operational attributes and the second for business elements.  Below are the allowed IN and OUT parameters for the operational Parameter resources.  These should be common to all messages.</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Parameter Name</th>
      <th style="text-align: left">Parameter Value</th>
      <th style="text-align: left">Comments</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">message id</td>
      <td style="text-align: left">parameter.value[string]</td>
      <td style="text-align: left">Message (unique) id</td>
    </tr>
    <tr>
      <td style="text-align: left">create time</td>
      <td style="text-align: left">parameter.value[dateTime]</td>
      <td style="text-align: left">Creation date of message</td>
    </tr>
    <tr>
      <td style="text-align: left">request message id</td>
      <td style="text-align: left">parameter.value[string]</td>
      <td style="text-align: left">Message (unique) id</td>
    </tr>
  </tbody>
</table>

<h4 id="searches">Searches</h4>
<p>There are two searches available for Client Registry FHIR, Find Candidates and Get Demographics.  The operations are:</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Search Operations</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">https://…./$FindCandidates</td>
    </tr>
    <tr>
      <td style="text-align: left">https://…./$GetDemographics</td>
    </tr>
    <tr>
      <td style="text-align: left">https://…./$GetDemographics.History</td>
    </tr>
  </tbody>
</table>

<p>Find Candidates may return 0 or more candidates, while Get Demographics is designed to return a single match.  These searches are expected to provide the required information to confirm a person’s identify.</p>

<p><a href="search.html" title="Find Candidates and Get Demographics">Search page</a></p>

<h4 id="revise-andor-merge-patient">Revise and/or Merge Patient</h4>

<p>Revise and Merge Patient are maintain transactions that are closely related and therefore are described in the same section.  They use the same FHIR structure and resources; merge uses additional parameters.</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Revise and Merge Operations</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">https://…./$RevisePatient</td>
    </tr>
    <tr>
      <td style="text-align: left">https://…./$RevisePatient.Async</td>
    </tr>
    <tr>
      <td style="text-align: left">https://…./$RevisePatient.Newborn</td>
    </tr>
    <tr>
      <td style="text-align: left">https://…./$MergePatient</td>
    </tr>
    <tr>
      <td style="text-align: left">https://…./$MergePatient.Async</td>
    </tr>
  </tbody>
</table>

<p>These business transactions will allow the user to:</p>
<ul>
  <li>update demographic information, if the patient exists within the Client Registry; or</li>
  <li>generate a PHN for a new client.</li>
</ul>

<p><a href="reviseAndMerge.html" title="Revise and Merge Patient">Revise and Merge page</a></p>

<h3 id="get-eligibility-is-not-supported-by-fhir">Get Eligibility is Not Supported by FHIR</h3>

<p>Get Eligibility will not be supported by the Client Registry FHIR interactions.  If a FHIR-only user needs to know the claim eligibility status of a Patient they need to retrieve the Patient (the PHN) with a FHIR Get Demographics message and then use the PHN to submit a Get Eligibility message to the eligibility service.</p>
<blockquote>
  <p>Is there more information we can provide here, like a link to some documentation on the eligibility service?</p>
</blockquote>




</div>
        </div>    <!-- /inner-wrapper -->
      </div>    <!-- /row -->
    </div>    <!-- /container -->
  </div>    <!-- /segment-content -->

  <script src="assets/js/jquery.js" type="text/javascript"> </script>       <!-- note keep space here, otherwise it will be transformed to empty tag -> fails -->
  <script src="assets/js/jquery-ui.min.js" type="text/javascript"> </script>

  <script type="text/javascript">
    $(document).ready(function(){
      if(window.location.hash != "") {
          $('a[href="' + window.location.hash + '"]').click()
      }
    });
  </script>
  <a name="bottom"> </a>
  <div igtool="footer" id="segment-footer" class="segment">    <!-- segment-footer -->
    <div class="container">    <!-- container -->

      <div class="inner-wrapper">
        <p><a name="l960">​</a>
          IG &copy; 2021+ <a style="color:var(--footer-hyperlink-text-color)" href="null"></a>.  Package moh-hcim#0.1.0 based on <a style="color: var(--footer-hyperlink-text-color)" href="http://hl7.org/fhir/R4/">FHIR 4.0.1</a>. Generated <span title="Wed, Oct 20, 2021 19:53+0000">2021-10-20</span>
          <br/>
          <span style="color: var(--footer-highlight-text-color)"></span>
                      Links: <a style="color: var(--footer-hyperlink-text-color)" href="toc.html">Table of Contents</a> |
                 <a style="color: var(--footer-hyperlink-text-color)" href="qa.html">QA Report</a>
                 
                
          
        </p>
      </div>    <!-- /inner-wrapper -->
    </div>    <!-- /container -->
  </div>    <!-- /segment-footer -->
  
  <div id="segment-post-footer" class="segment hidden">    <!-- segment-post-footer -->
    <div class="container">    <!-- container -->
    </div>    <!-- /container -->
  </div>    <!-- /segment-post-footer -->
  
    <!-- JS and analytics only. -->
    <!-- Bootstrap core JavaScript
  ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
  <script src="assets/js/bootstrap.min.js" type="text/javascript"> </script>
  <script src="assets/js/respond.min.js" type="text/javascript"> </script>
  <script src="assets/js/anchor.min.js" type="text/javascript"> </script>
  <script>anchors.options.visible = 'hover'
anchors.add()</script>
  
  <!-- feedback form - Google forms -->
  <!-- v0.1, 2021-01-09 -->



  <!-- / feedback form -->

    <!-- Analytics Below
  ================================================== -->
  </body>
</html>