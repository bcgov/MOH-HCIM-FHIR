<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE HTML>
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type"/>
    <title>FHIR Design - BC Client Registry FHIR Implementation Guide v1.0.0</title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="author" content="http://hl7.org/fhir"/>

    <link href="fhir.css" rel="stylesheet"/>

    <!-- Bootstrap core CSS -->
    <link href="assets/css/bootstrap-fhir.css" rel="stylesheet"/>

    <!-- Project extras -->
    <link href="assets/css/project.css" rel="stylesheet"/>
    <link href="assets/css/pygments-manni.css" rel="stylesheet"/>
    <link href="assets/css/jquery-ui.css" rel="stylesheet"/>
  	<link href="assets/css/prism.css" rel="stylesheet" />
    <!-- Placeholder for child template CSS declarations -->
<link href="assets/css/bc-fhir.css" rel="stylesheet"/>


    <script type="text/javascript" src="fhir-table-scripts.js"> </script>

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="assets/js/html5shiv.js"></script>
    <script src="assets/js/respond.min.js"></script>
    <![endif]-->

    <!-- Favicons -->
    <link rel="fhir-logo" sizes="144x144" href="assets/ico/icon-fhir-144.png"/>
    <link rel="fhir-logo" sizes="114x114" href="assets/ico/icon-fhir-114.png"/>
    <link rel="fhir-logo" sizes="72x72" href="assets/ico/icon-fhir-72.png"/>
    <link rel="fhir-logo" href="assets/ico/icon-fhir-57.png"/>
    <link rel="shortcut icon" href="assets/ico/favicon.png"/>
  </head>
  <body onload="document.body.style.opacity='1'">

	  <script src="assets/js/prism.js"></script>

    <style type="text/css">h2{--heading-prefix:"4"}
    h3,h4,h5,h6{--heading-prefix:"4"}</style>
    <div id="segment-header" class="segment">  <!-- segment-header -->
      <div class="container">  <!-- container -->
        <!-- Left logo - typically the publisher's logo - project or affiliate -->
        <div id="project-nav">
          <a id="project-logo" no-external="true" href="https://www2.gov.bc.ca/gov/content/governments/organizational-structure/ministries-organizations/ministries/health">
            <img height="71" alt="Project home" src="assets/images/BCMinistry.png"/>
          </a>
        </div>



        <div id="ig-status">
          <p><span style="font-size:12pt;font-weight:bold">BC Client Registry FHIR Implementation Guide</span>
            <br/>
            <span style="display:inline-block;">1.0.0 - Build CI



  <img alt="Canada flag" src="assets/images/can.svg" height="16" title="Canada"/>


            </span>
          </p>
        </div>
      </div> <!-- /container -->
    </div>  <!-- /segment-header -->

    <div id="segment-navbar" class="segment">  <!-- segment-navbar -->
      <div id="stripe"> </div>
      <div class="container">  <!-- container -->
        <!-- HEADER CONTENT -->

        <nav class="navbar navbar-inverse">
          <!--status-bar-->
          <div class="container">
            <button data-target=".navbar-inverse-collapse" class="navbar-toggle" data-toggle="collapse" type="button">
              <span class="icon-bar"> </span>
              <span class="icon-bar"> </span>
              <span class="icon-bar"> </span>
            </button>
            <a class="navbar-brand hidden" href="http://hl7.org/fhir/R4/index.html">FHIR</a>
            <div class="nav-collapse collapse navbar-inverse-collapse">
              <!-- menu.xml  -->

<ul xmlns="http://www.w3.org/1999/xhtml" class="nav navbar-nav">
  <li>
    <a href="index.html">Home</a>
  </li>
  <li>
    <a href="overview.html">Overview</a>
  </li>
  <li class="dropdown">
    <a data-toggle="dropdown" href="#" class="dropdown-toggle">Design
      <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
      <li>
        <a href="design.html">Summary</a>
      </li>
      <li>
        <a href="search.html">Search Patient</a>
      </li>
      <li>
        <a href="reviseAndMerge.html">Add, Revise, Update And Merge Patient</a>
      </li>
      <li>
        <a href="distributions.html">Patient Change Notificaitons</a>
      </li>
      <li>
        <a href="identifiers.html">Identifiers</a>
      </li>
      <li>
        <a href="absentData.html">Data Absent</a>
      </li>
    </ul>
  </li>
  <li>
    <a href="v3Transition.html">V3 Transition</a>
  </li>
  <li>
    <a href="connectedPartner.html">Connected Partner</a>
  </li>
  <li>
    <a href="capabilityStatement.html">Capability Statement</a>
  </li>
  <li>
    <a href="artifacts.html">Artifacts</a>
  </li>
  <li>
    <a href="futurePlans.html">Future Plans</a>
  </li>
  <li>
    <a href="terminology.html">Glossary</a>
  </li>
  <li>
    <a href="credits.html">Credits</a>
  </li>
</ul>
            </div>  <!-- /.nav-collapse -->
          </div>  <!-- /.container -->
        </nav>  <!-- /.navbar -->
      <!-- /HEADER CONTENT -->
      </div>  <!-- /container -->
    </div>  <!-- /segment-navbar -->
    <!--status-bar-->

    <div id="segment-breadcrumb" class="segment">  <!-- segment-breadcrumb -->
      <div class="container">  <!-- container -->
        <ul class="breadcrumb">
          <li><a href='toc.html'><b>Table of Contents</b></a></li><li><b>FHIR Design</b></li>

        </ul>
      </div>  <!-- /container -->
    </div>  <!-- /segment-breadcrumb -->

    <a name="top"> </a>
    <div id="segment-content" class="segment">  <!-- segment-content -->
      <div class="container">  <!-- container -->
        <div class="row">
          <div class="inner-wrapper">

<style type="text/css">
h2:before{color:silver;counter-increment:section;content:var(--heading-prefix) " ";}
h3:before{color:silver;counter-increment:sub-section;content:var(--heading-prefix) "." counter(sub-section) " ";}
h4:before{color:silver;counter-increment:composite;content:var(--heading-prefix) "." counter(sub-section) "." counter(composite) " ";}
h5:before{color:silver;counter-increment:detail;content:var(--heading-prefix) "." counter(sub-section) "." counter(composite) "." counter(detail) " ";}
h6:before{color:silver;counter-increment:more-detail;content:var(--heading-prefix) "." counter(sub-section) "." counter(composite) "." counter(detail) "." counter(more-detail)" ";}
</style>
<div class="col-12">
  <!--ReleaseHeader--><p id="publish-box">BC Client Registry FHIR Implementation Guide - Local Development build (v1.0.0) built by the FHIR (HL7® FHIR® Standard) Build Tools. See the <a href="http://hlth.gov.bc.ca/fhir/client/history.html">Directory of published versions</a></p><!--EndReleaseHeader-->
  <h2>FHIR Design</h2>
  












    <p><!-- white space is critical inside of capture --></p>
<div class="markdown-toc">
<ul id="markdown-toc">
  <li><a href="#design-approach" id="markdown-toc-design-approach">Design Approach</a></li>
  <li><a href="#design-assumptions" id="markdown-toc-design-assumptions">Design Assumptions</a></li>
  <li><a href="#design-outcomes---overview" id="markdown-toc-design-outcomes---overview">Design Outcomes - Overview</a></li>
  <li><a href="#design-outcomes---details" id="markdown-toc-design-outcomes---details">Design Outcomes - Details</a></li>
  <li><a href="#error-handling" id="markdown-toc-error-handling">Error Handling</a></li>
  <li><a href="#success-status-codes" id="markdown-toc-success-status-codes">Success Status Codes</a></li>
</ul>

</div>
<blockquote>
  <p><span style="color:red">Note</span><br />This specification is currently published as a Draft Standard on the ministry GitHub and is not intended for implementation. Feedback is welcome but readers should understand that there is more work to be done in testing the profiles and operations defined in this guide. For more information, please see the Future Plans page in this guide.</p>
</blockquote>

<h3 id="design-approach">Design Approach</h3>
<p>The approach to design a FHIR interface to the Client Registry was to keep the interactions as similar as possible to the current system.  Any necessary additions and improvements were also considered for inclusion.
Namely:</p>
<ul>
  <li>The design team will match current Client Registry interactions 1 to 1 with equivalent FHIR interactions for all the flavours of:
    <ul>
      <li>Find Candidates</li>
      <li>Get Demographics</li>
      <li>Revise Patient</li>
      <li>Merge Patient</li>
      <li>Distribute Patient</li>
    </ul>
  </li>
  <li>Asynchronous interactions will be supported as with the current system; supporting asynchronous for interactions that write data to the Client Registry.</li>
  <li>New attributes can be included in FHIR that are not in V3 (such as more business dates)</li>
  <li>HL7 V3 will remain supported, but no new features added</li>
  <li>The Client Registry profiles should conform to the Canadian Baseline profiles</li>
</ul>

<h3 id="design-assumptions">Design Assumptions</h3>
<p>There are a number of assumptions that were made at the start of design:</p>

<ul>
  <li>FHIR is not expected to adversely affect performance, i.e. SLA is not changing for FHIR but will be extended to include FHIR</li>
  <li>Existing interfaces, such as V3, will be available</li>
  <li>Users can use a combination of V3 and FHIR to meet their needs</li>
  <li>The Client Registry FHIR design will become a Provincial standard</li>
  <li>Asynchronous interactions will follow the same pattern as V3 (not the FHIR asynchronous pattern)</li>
</ul>

<h3 id="design-outcomes---overview">Design Outcomes - Overview</h3>
<p>The main outcomes from the design process were as follows:</p>

<ul>
  <li>The primary resource is Patient and Patient will be used to communicate client attributes</li>
  <li>The JSON text format will be used to receive and transmit FHIR resources</li>
  <li>FHIR Operations will be used for Client Registry interactions</li>
  <li>Some FHIR extensions are necessary, they are outlined below</li>
  <li>There are several new interactions and features, these are described below</li>
</ul>

<h4 id="new-interactions-and-features">New Interactions and Features</h4>

<p>These items are new to the Client Registry interface and subject to change as they are reviewed and evolve.</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Proposal</th>
      <th style="text-align: left">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">Add Patient interaction</td>
      <td style="text-align: left">Some of the features normally done through the Revise Patient interaction are now part of Add Patient.  Specifically, ‘force create’ and newborn interactions are now done with Add Patient.</td>
    </tr>
    <tr>
      <td style="text-align: left">Partial Update interaction</td>
      <td style="text-align: left">A Partial Update interaction allows users to logically delete, add or change part of the Patient resource.  This is useful when a stakeholder doesn’t need (or persist) certain Patient attributes, but today, must query and then echo back these attributes in a Revise Patient interaction.  The exact operations allowed by the Client Registry is to be determined.</td>
    </tr>
    <tr>
      <td style="text-align: left">Business dates feature</td>
      <td style="text-align: left">Attributes will have business dates that haven’t been present in V3.</td>
    </tr>
    <tr>
      <td style="text-align: left">Get Eligibility interaction</td>
      <td style="text-align: left">This guide includes sections describing a Get Eligibility interaction that is similar to V3.  However the Get Eligibility FHIR specification should be provided by Health Insurance BC (HIBC).  This guide speculates on how those requests and responses may be structured but the Client Registry <em>FHIR team still needs to consult with HIBC</em>.</td>
    </tr>
  </tbody>
</table>

<h4 id="patient-resource">Patient Resource</h4>

<p>All interactions will primarily use the Patient resource.  The Patient resource is ideal to represent clients as the Patient resource has many of the necessary attributes but will require some extensions.  Patients also are recommended for enterprise master patient indices by the HL7 group and is in a Normative state, i.e. stable and ready for implementation.  See <a href="http://hl7.org/fhir/versions.html#std-process">FHIR standards evolution</a> for a description of Normative.</p>

<p>Four Patient profiles are used: the main profile <a href="StructureDefinition-bc-patient.html">ClientRegistryPatient</a> - used also the search profile in the search operation (GetDemographics and FindCandidates), the merge profile <a href="StructureDefinition-bc-merge-patient.html">MergePatient</a> and finally the <a href="StructureDefinition-bc-update-request-bundle.html">PatientUpdate</a> for partial updates, e.g. updating just address or just telephone.</p>

<h5 id="patient-resource-logical-id">Patient Resource (Logical) Id</h5>

<p>PHN is a sensitive Patient attribute and although considered for the Paitent Resource ID this idea was discarded.  A non-PII surrogate Resource ID has been created which this guide will call the surrogate PHN.  It is a universal uniuqe identifier (UUID) and Patient Resources will be populated with this UUID.</p>

<h5 id="patient-extensions">Patient Extensions</h5>

<p>There are several extensions that are applied to the Patient resource.  The list below is an overview, more details on the extensions can be found by following the links on the Patient resource snapshot <a href="StructureDefinition-bc-patient.html">page</a> .</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Extension Name</th>
      <th style="text-align: left">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">bc-business-period-extension</td>
      <td style="text-align: left">A Period extension for the business effective dates.</td>
    </tr>
    <tr>
      <td style="text-align: left">bc-validation-status-extension</td>
      <td style="text-align: left">A code that represents the address validation status.  This will be part of every Patient.address</td>
    </tr>
    <tr>
      <td style="text-align: left">bc-death-verified-flag-extension</td>
      <td style="text-align: left">An extension that indicates a verified death.</td>
    </tr>
    <tr>
      <td style="text-align: left">bc-*-history-extension</td>
      <td style="text-align: left">The set of history extensions are necessary to add historical records to the Patient resource such as gender.</td>
    </tr>
    <tr>
      <td style="text-align: left">bc-gender-identity-extension</td>
      <td style="text-align: left">An extension that houses the gender identity codeable concept.</td>
    </tr>
    <tr>
      <td style="text-align: left">bc-sourceId-extension</td>
      <td style="text-align: left">The source identifier code.</td>
    </tr>
    <tr>
      <td style="text-align: left">bc-identifier-status-extension</td>
      <td style="text-align: left">The status of an identifier, e.g. active, merged.</td>
    </tr>
  </tbody>
</table>

<h5 id="codes-and-value-sets">Codes and Value Sets</h5>

<p>The Client Registry doesn’t recognize all the standard FHIR codes for some attributes that must be supported, see the table below which indicates the supported codes.</p>

<table class="grid">
  <thead>
    <tr>
      <th style="text-align: left">Attribute</th>
      <th style="text-align: left">Supported Codes</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">Patient.name.use</td>
      <td style="text-align: left">Only <em>usual</em>,  <em>official</em> or <em>nickname</em> from NameUse value set.</td>
    </tr>
    <tr>
      <td style="text-align: left">Patient.telecom.use</td>
      <td style="text-align: left">Only <em>home</em>, <em>work</em>, <em>mobile</em> from the ContactPointUse value set.</td>
    </tr>
    <tr>
      <td style="text-align: left">Patient.telecom.system</td>
      <td style="text-align: left">Only <em>phone</em> or <em>email</em> from the ContactPointSystem value set.</td>
    </tr>
    <tr>
      <td style="text-align: left">Patient.address.type</td>
      <td style="text-align: left">Only <em>postal</em> or <em>physical</em> from the AddressType value set.</td>
    </tr>
    <tr>
      <td style="text-align: left">Patient.identifier.system</td>
      <td style="text-align: left">See the section on <a href="identifiers.html">identifiers</a></td>
    </tr>
  </tbody>
</table>

<p>The following table maps the FHIR codes to Client Registry codes.</p>

<table class="grid">
  <thead>
    <tr>
      <th style="text-align: left">FHIR Code Type</th>
      <th style="text-align: left">FHIR Code</th>
      <th style="text-align: left">HCIM Equivalent</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">Name.use</td>
      <td style="text-align: left">usual</td>
      <td style="text-align: left">declared</td>
    </tr>
    <tr>
      <td style="text-align: left">Name.use</td>
      <td style="text-align: left">official</td>
      <td style="text-align: left">card</td>
    </tr>
    <tr>
      <td style="text-align: left">Name.use</td>
      <td style="text-align: left">nickname</td>
      <td style="text-align: left">preferred</td>
    </tr>
    <tr>
      <td style="text-align: left">Telecom.use</td>
      <td style="text-align: left">home</td>
      <td style="text-align: left">home</td>
    </tr>
    <tr>
      <td style="text-align: left">Telecom.use</td>
      <td style="text-align: left">work</td>
      <td style="text-align: left">work</td>
    </tr>
    <tr>
      <td style="text-align: left">Telecom.use</td>
      <td style="text-align: left">mobile</td>
      <td style="text-align: left">mobile</td>
    </tr>
    <tr>
      <td style="text-align: left">Telecom.system</td>
      <td style="text-align: left">phone</td>
      <td style="text-align: left">phone</td>
    </tr>
    <tr>
      <td style="text-align: left">Telecom.system</td>
      <td style="text-align: left">email</td>
      <td style="text-align: left">email</td>
    </tr>
    <tr>
      <td style="text-align: left">Address.type</td>
      <td style="text-align: left">postal</td>
      <td style="text-align: left">mailing</td>
    </tr>
    <tr>
      <td style="text-align: left">Address.type</td>
      <td style="text-align: left">physical</td>
      <td style="text-align: left">physical</td>
    </tr>
    <tr>
      <td style="text-align: left">Gender</td>
      <td style="text-align: left">other</td>
      <td style="text-align: left">undifferentiated</td>
    </tr>
    <tr>
      <td style="text-align: left">Gender</td>
      <td style="text-align: left">unknown</td>
      <td style="text-align: left">unknown</td>
    </tr>
    <tr>
      <td style="text-align: left">Gender</td>
      <td style="text-align: left">male</td>
      <td style="text-align: left">male</td>
    </tr>
    <tr>
      <td style="text-align: left">Gender</td>
      <td style="text-align: left">female</td>
      <td style="text-align: left">female</td>
    </tr>
  </tbody>
</table>

<h4 id="fhir-operations">FHIR Operations</h4>

<p>The Client Registry will use the FHIR Operations pattern to exchange information.  These are the Operations that Client Registry FHIR will support:</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Operations</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">https://…./Patient/$FindCandidates</td>
    </tr>
    <tr>
      <td style="text-align: left">https://…./Patient/$GetDemographics</td>
    </tr>
    <tr>
      <td style="text-align: left">https://…./Patient/$GetDemographics.withEligibility</td>
    </tr>
    <tr>
      <td style="text-align: left">https://…./Patient/$RevisePatient</td>
    </tr>
    <tr>
      <td style="text-align: left">https://…./Patient/$RevisePatient.Async</td>
    </tr>
    <tr>
      <td style="text-align: left">https://…./Patient/$PartialUpdatePatient</td>
    </tr>
    <tr>
      <td style="text-align: left">https://…./Patient/$PartialUpdatePatient.Async</td>
    </tr>
    <tr>
      <td style="text-align: left">https://…./Patient/$AddPatient</td>
    </tr>
    <tr>
      <td style="text-align: left">https://…./Patient/$AddPatient.Async</td>
    </tr>
    <tr>
      <td style="text-align: left">https://…./Patient/$MergePatient</td>
    </tr>
    <tr>
      <td style="text-align: left">https://…./Patient/$MergePatient.Async</td>
    </tr>
    <tr>
      <td style="text-align: left">https://…./Patient/$PatientNotification</td>
    </tr>
  </tbody>
</table>

<p>The Async suffix informs the Client Registry FHIR server to perform the operation in an asynchronous manner.  The profiles and examples used in the Async versions of the Operations are identical to the synchronous Operations.</p>

<h5 id="requests">Requests</h5>

<p>The body of the request message will vary depending on the business context however all message bodies will consist of a Bundle with at least a Parameters resource and may have Patient and RelatedPerson resources in other Bundle entries.</p>

<p>The Bundle profile for the request depends on the type of request.</p>

<table class="grid">
  <thead>
    <tr>
      <th style="text-align: left">Operations</th>
      <th style="text-align: left">Request Bundle Profile</th>
      <th style="text-align: left">Response Bundle Profile</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">$FindCandidates</td>
      <td style="text-align: left"><a href="StructureDefinition-bc-find-candidates-request-bundle.html">Find Candidates request profile</a></td>
      <td style="text-align: left"><a href="StructureDefinition-bc-search-response-bundle.html">Find Candidates response profile</a></td>
    </tr>
    <tr>
      <td style="text-align: left">$GetDemographics</td>
      <td style="text-align: left"><a href="StructureDefinition-bc-get-demographics-request-bundle.html">Get Demographics request profile</a></td>
      <td style="text-align: left"><a href="StructureDefinition-bc-search-response-bundle.html">Get Demographics response profile</a></td>
    </tr>
    <tr>
      <td style="text-align: left">$GetDemographics.withEligibility</td>
      <td style="text-align: left"><a href="StructureDefinition-bc-get-demographics-request-bundle.html">Get Demographics with Eligibility Bundle profile</a></td>
      <td style="text-align: left"><a href="StructureDefinition-bc-search-response-bundle.html">Get Demographics response profile</a></td>
    </tr>
    <tr>
      <td style="text-align: left">$RevisePatient</td>
      <td style="text-align: left"><a href="StructureDefinition-bc-revise-request-bundle.html">Revise Patient request profile</a></td>
      <td style="text-align: left"><a href="StructureDefinition-bc-revise-response-bundle.html">Revise Patient response profile</a></td>
    </tr>
    <tr>
      <td style="text-align: left">$RevisePatient.Async</td>
      <td style="text-align: left"><a href="StructureDefinition-bc-revise-request-bundle.html">Revise Patient request profile</a></td>
      <td style="text-align: left"><a href="StructureDefinition-bc-revise-response-bundle.html">Revise Patient response profile</a></td>
    </tr>
    <tr>
      <td style="text-align: left">$PartialUpdatePatient</td>
      <td style="text-align: left"><a href="StructureDefinition-bc-update-request-bundle.html">Update Patient profile</a></td>
      <td style="text-align: left"><a href="StructureDefinition-bc-revise-response-bundle.html">Update Patient response profile</a> (uses revise)</td>
    </tr>
    <tr>
      <td style="text-align: left">$PartialUpdatePatient.Async</td>
      <td style="text-align: left"><a href="StructureDefinition-bc-update-request-bundle.html">Update Patient profile</a></td>
      <td style="text-align: left"><a href="StructureDefinition-bc-revise-response-bundle.html">Update Patient response profile</a> (uses revise)</td>
    </tr>
    <tr>
      <td style="text-align: left">$AddPatient</td>
      <td style="text-align: left"><a href="StructureDefinition-bc-add-request-bundle.html">Add Patient request profile</a></td>
      <td style="text-align: left"><a href="StructureDefinition-bc-add-response-bundle.html">Add Patient response profile</a></td>
    </tr>
    <tr>
      <td style="text-align: left">$AddPatient.Async</td>
      <td style="text-align: left"><a href="StructureDefinition-bc-add-request-bundle.html">Add Patient request profile</a></td>
      <td style="text-align: left"><a href="StructureDefinition-bc-add-response-bundle.html">Add Patient response profile</a></td>
    </tr>
    <tr>
      <td style="text-align: left">$MergePatient</td>
      <td style="text-align: left"><a href="StructureDefinition-bc-merge-request-bundle.html">Merge Patient request profile</a></td>
      <td style="text-align: left"><a href="StructureDefinition-bc-merge-response-bundle.html">Merge Patient response profile</a></td>
    </tr>
    <tr>
      <td style="text-align: left">$MergePatient.Async</td>
      <td style="text-align: left"><a href="StructureDefinition-bc-merge-request-bundle.html">Merge Patient request profile</a></td>
      <td style="text-align: left"><a href="StructureDefinition-bc-merge-response-bundle.html">Merge Patient response profile</a></td>
    </tr>
    <tr>
      <td style="text-align: left">$PatientNotification</td>
      <td style="text-align: left"><a href="StructureDefinition-bc-revise-request-bundle.html">Patient Notification request profile</a></td>
      <td style="text-align: left">N/A</td>
    </tr>
  </tbody>
</table>

<h5 id="responses">Responses</h5>

<p>Response resources are wrapped in Bundles.  A search operation like Get Demographics or Find Candidates will be a searchset Bundle that echoes back the search parameters by including an extra Parameters resource in the Bundle.</p>

<h4 id="fhir-restful">FHIR Restful</h4>

<p>The surrogate PHN can be used to query for Patients.</p>

<p>https://…./Patient/UUID</p>

<p>Two operations related to UUID are also available</p>

<table class="grid">
  <thead>
    <tr>
      <th style="text-align: left">Restful</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">GET https://…./Patient/UUID/$HistoryPatient</td>
    </tr>
    <tr>
      <td style="text-align: left">GET https://…./Patient/UUID/_elements=identifier</td>
    </tr>
  </tbody>
</table>

<p>$HistoryPatient is equivalent to the <a href="OperationDefinition-bc-patient-get-demographics.html#metadata-in-parameters">$GetDemograhpics with the withHistory parameter</a>.</p>

<p>_elements=identifier is equivalent to the <a href="OperationDefinition-bc-patient-get-demographics.html#metadata-in-parameters">$GetDemographics with the idenifiersOnly parameter</a>.</p>

<h3 id="design-outcomes---details">Design Outcomes - Details</h3>

<p>This guide touches on some of the business and conformance rules regarding use of the Client Registry.  However this guide is not the source of conformance or business rules and the audience is referred to British Columbia’s <a href="https://www2.gov.bc.ca/gov/content/health/practitioner-professional-resources/software">Health Information Exchange</a> web site for details on the Client Registry system and access to Client Registry.</p>

<h4 id="operational-parameter-resource">Operational Parameter Resource</h4>

<p>Each interaction is a FHIR Operation using a Bundle.  The Bundle entries will consists of parameters, patients, etc.</p>

<p>The table below is only showing the standard parameters included in each Bundle; each Operation may have more parameters such as withHistory.  More detailed information regarding each Operation can be found in the <a href="artifacts.html#operation-definitions">Operation definitions</a>.</p>

<table class="grid">
  <thead>
    <tr>
      <th style="text-align: left">Parameter Name</th>
      <th style="text-align: left">Parameter Value</th>
      <th style="text-align: left">Comments</th>
      <th style="text-align: left">IN, OUT, both</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">message id</td>
      <td style="text-align: left">parameter.value[string]</td>
      <td style="text-align: left">Message (unique) id</td>
      <td style="text-align: left">both</td>
    </tr>
    <tr>
      <td style="text-align: left">create time</td>
      <td style="text-align: left">parameter.value[dateTime]</td>
      <td style="text-align: left">Creation date of message</td>
      <td style="text-align: left">both</td>
    </tr>
    <tr>
      <td style="text-align: left">request message id</td>
      <td style="text-align: left">parameter.value[string]</td>
      <td style="text-align: left">Message (unique) id</td>
      <td style="text-align: left">OUT</td>
    </tr>
    <tr>
      <td style="text-align: left">sender</td>
      <td style="text-align: left">parameter.value[Identifier]</td>
      <td style="text-align: left">Message sender</td>
      <td style="text-align: left">OUT</td>
    </tr>
    <tr>
      <td style="text-align: left">enterer</td>
      <td style="text-align: left">parameter.value[Identifier]</td>
      <td style="text-align: left">UserId for message</td>
      <td style="text-align: left">OUT</td>
    </tr>
    <tr>
      <td style="text-align: left">requestParameters</td>
      <td style="text-align: left">parameter.value[MetadataParametersIn]</td>
      <td style="text-align: left">For searches this is included in the response and echoes back the search IN parameters.</td>
      <td style="text-align: left"> </td>
    </tr>
  </tbody>
</table>

<h4 id="searches">Searches</h4>
<p>There are three searches available for Client Registry FHIR, two flavours of Find Candidates and one Get Demographics.  The operations are:</p>

<table class="grid">
  <thead>
    <tr>
      <th style="text-align: left">Search Operations</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">https://…./$FindCandidates</td>
      <td>Searching for Patients that match the search criteria</td>
    </tr>
    <tr>
      <td style="text-align: left">https://…./$GetDemographics</td>
      <td>Searching for a single Patient</td>
    </tr>
    <tr>
      <td style="text-align: left">https://…./$GetDemographics.withEligibility</td>
      <td>Searching for a single Patient and asking the Client Registry to also return the British Columbia medical insurance eligibility for this Patient</td>
    </tr>
  </tbody>
</table>

<p>Find Candidates may return zero or more candidates, while Get Demographics is designed to return zero or a single matching Patient.  These searches are expected to provide the required information to confirm a person’s identify.</p>

<p>More details can be found here, <a href="search.html" title="Find Candidates and Get Demographics">Search page</a>.</p>

<h4 id="add-revise-update-andor-merge-patient">Add, Revise, Update and/or Merge Patient</h4>

<p>Add, Revise, Update and Merge Patient are maintain transactions that are closely related and therefore are described in the same section.  They use the same FHIR structure and similar resources; merge uses additional parameters.</p>

<table class="grid">
  <thead>
    <tr>
      <th style="text-align: left">Add, Revise, Update and Merge Operations</th>
      <th style="text-align: left">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">https://…./$RevisePatient</td>
      <td style="text-align: left">Updating a Patient</td>
    </tr>
    <tr>
      <td style="text-align: left">https://…./$RevisePatient.Async</td>
      <td style="text-align: left">Updating a Patient asynchronously</td>
    </tr>
    <tr>
      <td style="text-align: left">https://…./$PartialUpdatePatient</td>
      <td style="text-align: left">Updating a specific Patient attribute</td>
    </tr>
    <tr>
      <td style="text-align: left">https://…./$PartialUpdatePatient.Async</td>
      <td style="text-align: left">Updating a specific Patient attribute asynchronously</td>
    </tr>
    <tr>
      <td style="text-align: left">https://…./$AddPatient</td>
      <td style="text-align: left">For newborns or to ‘force create’ a Patient</td>
    </tr>
    <tr>
      <td style="text-align: left">https://…./$AddPatient.Async</td>
      <td style="text-align: left">The asynchronous version of AddPatient</td>
    </tr>
    <tr>
      <td style="text-align: left">https://…./$MergePatient</td>
      <td style="text-align: left">Resolving duplicate Patients records (same individual)</td>
    </tr>
    <tr>
      <td style="text-align: left">https://…./$MergePatient.Async</td>
      <td style="text-align: left">Resolving duplicate Patients records (same individual) asynchronously</td>
    </tr>
  </tbody>
</table>

<p>These business transactions will allow the user to:</p>
<ul>
  <li>update demographic information, if the patient exists within the Client Registry; or</li>
  <li>generate a PHN for a new client; or</li>
  <li>resolve duplicate Patients.</li>
</ul>

<p>More details can be found here, <a href="reviseAndMerge.html">Add, Revise, Update and Merge page</a>.</p>

<h4 id="distributions">Distributions</h4>

<p>Distributions will use a stakeholder client endpoint for the $PatientNotification operation.  The FHIR structure of the interaction is the same as RevisePatient.</p>

<p>See <a href="distributions.html">Patient Notifications</a> for more details.</p>

<h5 id="asynchronous-operations">Asynchronous Operations</h5>
<p>The asynchronous versions of Add, Revise, Update and Merge Operations share the same request and response profile as the synchronous version.</p>

<p>The FHIR asynchronous pattern is not followed by this FHIR implementation.  The existing pattern the Client Registry uses today will be mimicked.  I.e.</p>
<ol>
  <li>User sends request</li>
  <li>Client Registry responds with HTTP 202 Accepted</li>
  <li>And later, Client Registry sends request to user’s end point</li>
  <li>User system responds with 202 Accepted</li>
</ol>

<h3 id="error-handling">Error Handling</h3>

<p>This implementation of FHIR will follow the standard FHIR error handling.  E.g. return an OperationOutcome in a Bundle with the appropriate HTTP status code.  Users are expected to monitor the http status codes and the OperationOutcome resources for issues.</p>

<h3 id="success-status-codes">Success Status Codes</h3>

<p>HTTP 200 (OK) will be returned in all cases where the request was successful.  This includes a search that was a valid FHIR Operation but did not match any Patients.  The only exceptions when a Patient is first created, the status code response is 201 (Created).</p>




</div>
        </div>  <!-- /inner-wrapper -->
      </div>  <!-- /row -->
    </div>  <!-- /container -->
  </div>  <!-- /segment-content -->

  <script type="text/javascript" src="assets/js/jquery.js"> </script>     <!-- note keep space here, otherwise it will be transformed to empty tag -> fails -->
  <script type="text/javascript" src="assets/js/jquery-ui.min.js"> </script>

  <script type="text/javascript">
    $(document).ready(function(){
      if(window.location.hash != "") {
          $('a[href="' + window.location.hash + '"]').click()
      }
    });
  </script>
  <a name="bottom"> </a>
  <div id="segment-footer" igtool="footer" class="segment">  <!-- segment-footer -->
    <div class="container">  <!-- container -->

      <div class="inner-wrapper">
        <p>
          IG &#169; 2022+ <a style="color:var(--footer-hyperlink-text-color)" href="https://www2.gov.bc.ca/gov/content/governments/organizational-structure/ministries-organizations/ministries/health">BC Ministry of Health</a>.  Package fhir.ca-bc.client#1.0.0 based on <a style="color: var(--footer-hyperlink-text-color)" href="http://hl7.org/fhir/R4/">FHIR 4.0.1</a>. Generated <span title="Mon, Jan 29, 2024 15:29+0000">2024-01-29</span>
          <br/>
          <span style="color: var(--footer-highlight-text-color)">
                      Links: <a style="color: var(--footer-hyperlink-text-color)" href="toc.html">Table of Contents</a> |
                 <a style="color: var(--footer-hyperlink-text-color)" href="qa.html">QA Report</a>
                 
                
          </span>
        </p>
      </div>  <!-- /inner-wrapper -->
    </div>  <!-- /container -->
  </div>  <!-- /segment-footer -->
  
  <div id="segment-post-footer" class="segment hidden">  <!-- segment-post-footer -->
    <div class="container">  <!-- container -->
    </div>  <!-- /container -->
  </div>  <!-- /segment-post-footer -->
  
  <!-- JS and analytics only. -->
  <!-- Bootstrap core JavaScript
  ================================================== -->
  <!-- Placed at the end of the document so the pages load faster -->
  <script type="text/javascript" src="assets/js/bootstrap.min.js"> </script>
  <script type="text/javascript" src="assets/js/respond.min.js"> </script>
  <script type="text/javascript" src="assets/js/anchor.min.js"> </script>
  <script type="text/javascript" src="assets/js/clipboard.min.js"> </script>
  <script type="text/javascript" src="assets/js/clipboard-btn.js"> </script>
  <script>anchors.options.visible = 'hover'
anchors.add()</script>
  
<!-- feedback form - Google forms -->
<!-- v0.1, 2021-01-09 -->



<!-- / feedback form  -->

  <!-- Analytics Below
  ================================================== -->
  </body>
</html>

